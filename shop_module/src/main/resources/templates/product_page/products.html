<!DOCTYPE html>
<html lang="en">
<head>
    <div th:insert="include/header :: header"></div>
    <title>Title</title>
    <!-- Stomp -->
    <script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="webjars/stomp-websocket/stomp.min.js"></script>
    <script src="webjars/jquery/jquery.min.js"></script>
    <script src="products.js"></script>

</head>
<body>
<!----------- navBar ------------>
<nav th:insert="include/navBar :: navbar"></nav>
<main class="container mt-3">
    <!----------- Form Add ------------>
    <form style="text-align: center">
        <table align="center">
            <tr>
                <td>Title</td>
                <td><input type="text" id="title"></td>
            </tr>
            <tr>
                <td>Price</td>
                <td><input type="number" id="price"></td>
            </tr>
        </table>
        <button id="send" type="submit">Submit</button>
    </form>



    <!----------- content ------------>
    <table id="table" class="table table-dark table-hover mt-5 col-10">
        <thead>
        <tr>
            <th scope="col" th:include="include/sort_header :: sort_header('Title', 'title')">Title</th>
            <th scope="col" th:include="include/sort_header :: sort_header('price', 'price')">Price</th>
            <td></td>
        </tr>
        </thead>
        <tbody >
        <tr th:each="product : ${products}" >
            <td th:text="${product.title}">title</td>
            <td th:text="${product.price}" >price$</td>
            <td><a th:href="@{/product/{id}/bucket(id=${product.id})}">Add to bucket</a></td>
        </tr>
    </table>

    <!-- __________________________________pagination_______________________________________-->
    <div th:if="${products.hasContent()}">
        <nav aria-label="product list">
            <ul class="pagination justify-content-center">
                <li   th:classappend="${products.isFirst()} ? 'disabled'"
                      class="page-item">
                    <a class="page-link"
                       th:href="@{/product/list(
                       page=${products.number},
                        size=${products.size},
                        titleFilter=${param.titleFilter},
                        min=${param.min},
                        max=${param.max}
                       )}">Previous</a></li>


                <th:block th:if="${products.totalPages >= 10}">

                    <th:block th:if="${products.number <= 5 }">
                        <li
                                th:each="num : ${#numbers.sequence(1, 9)}"
                                class="page-item"
                                th:classappend="${num == products.number + 1} ? 'active'">
                            <a class="page-link" th:href="@{/product/list(
                    page=${num},
                    size=${products.size},
                    titleFilter=${param.titleFilter},
                     min=${param.min},
                     max=${param.max}
                    )}">[[${num}]]</a>

                        </li>
                        <a class="page-link">...</a>
                    </th:block>
                    <th:block th:if="${products.number >= 5 && products.number > products.totalPages - 4 }">
                        <a class="page-link">...</a>
                        <li
                                th:each="num : ${#numbers.sequence(1, 5)}"
                                class="page-item"
                                th:classappend="${num == products.number + 1} ? 'active'">
                            <a class="page-link" th:href="@{/product/list(
                    page=${num},
                    size=${products.size},
                    titleFilter=${param.titleFilter},
                     min=${param.min},
                     max=${param.max}
                    )}">[[${num}]]</a>
                        </li>
                        <a class="page-link">...</a>
                    </th:block>

                    <th:block th:if="${products.number >= 5 && products.number < products.totalPages - 4 }">
                        <a class="page-link">...</a>
                        <li
                                th:each="num : ${#numbers.sequence(1, 5)}"
                                class="page-item"
                                th:classappend="${num == products.number + 1} ? 'active'">
                            <a class="page-link" th:href="@{/product/list(
                    page=${num},
                    size=${products.size},
                    titleFilter=${param.titleFilter},
                     min=${param.min},
                     max=${param.max}
                    )}">[[${num}]]</a>
                        </li>
                    </th:block>
                </th:block>


                <th:block th:if="${products.totalPages < 10}">
                    <li
                            th:each="num : ${#numbers.sequence(1, products.totalPages)}"
                            class="page-item"
                            th:classappend="${num == products.number + 1} ? 'active'">
                        <a class="page-link" th:href="@{/product/list(
                    page=${num},
                    size=${products.size},
                    titleFilter=${param.titleFilter},
                     min=${param.min},
                     max=${param.max}
                    )}">[[${num}]]</a>
                    </li>
                </th:block>

                <li class="page-item"
                    th:classappend="${products.isLast()} ? 'disabled'">
                    <a
                            class="page-link"
                            th:href="@{/product/list(
                       page=${products.number + 2},
                    size=${products.size},
                    titleFilter=${param.titleFilter},
                     min=${param.min},
                     max=${param.max}
                       )}">Next</a></li>

            </ul>
        </nav>
    </div>


</main>


</body>
</html>